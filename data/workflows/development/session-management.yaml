name: Session Management with Workflow Completion Checks
description: session management that detects and handles incomplete workflows.
triggers:
  - complete session
  - finish session
  - execute session cleanup
  - run session closure
  - check workflow status
  - session health check
project_types:
  - python
  - typescript
  - javascript
  - rust
  - go
  - general
dependencies:
  - git (for analyzing recent changes)
conditions:
  - After significant development sessions
  - When workflows may have been forgotten
  - Before session closure
steps:
  - 'Check active workflows: Use `list_workflow_sessions` to see any active workflow
    sessions.'
  - 'Monitor session health: Use `monitor_sessions` to check for dormant or stale workflows.'
  - 'Review session alerts: Check monitoring output for any alerts about forgotten workflows.'
  - 'Handle active workflows: For each active session, either `advance_workflow` to
    next step or `break_workflow` if complete.'
  - 'Clean up stale sessions: Use `cleanup_stale_sessions` to automatically clean up
    old inactive sessions.'
  - 'Progress review: Run `git status --porcelain` to check session modifications.'
  - 'Change commitment: Run `git add .` and `git commit -m "Session completion: [description]"`
    if changes should be saved.'
  - "Temporary file search: Run `find . -name 'debug*' -o -name '*.tmp' -o -name
    '*_new.*' -o -name '*.bak'` to locate cleanup targets."
  - 'Final workflow verification: Use `list_workflow_sessions` again to ensure all workflows
    are properly completed.'
  - 'Working tree cleanup: Ensure clean state with `git status` showing no uncommitted
    changes.'
items:
  - All active workflow sessions have been properly completed or broken out.
  - Session monitoring shows no alerts for dormant or forgotten workflows.
  - Changes properly committed or stashed with appropriate messages.
  - Temporary files identified and cleaned up as needed.
  - No orphaned workflow sessions remain active.
  - Session accomplishments documented appropriately.
  - Working tree is clean with all changes properly managed.
  - Workflow lifecycle properly managed throughout session.
