name: python_test
description: "Run Python tests with pytest"
triggers:
  - "run.*tests"
  - "test.*code"
  - "pytest"
  - "check.*tests"
steps:
  - "Run tests: `uv run pytest -q --maxfail=1`"
  - "Install pytest if missing: `uv add --dev pytest`"
  - "Create test scaffold if no tests exist: `mkdir -p tests && echo 'def test_placeholder(): pass' > tests/test_basic.py`"
  - "Run specific test file: `uv run pytest tests/test_specific.py -v`"
  - "Run with coverage: `uv run pytest --cov=. --cov-report=term-missing`"
dependencies:
  - "python_quality"
project_types:
  - "python"
conditions:
  - "file:pyproject.toml"
  - "pattern:test_*.py"
  - "pattern:*_test.py"
