name: "validate_format"
display_name: "‚úÖ Validate .vibe.yaml configuration format"
description: "Comprehensive validation of .vibe.yaml structure and format for any project"
category: "configuration"
triggers:
  - "validate config"
  - "check yaml format"
  - "validate .vibe.yaml"
  - "config validation"
  - "validate vibe config"
  - "check config format"
  - "validate configuration"
steps:
  - echo 'üîç VIBE CONFIGURATION VALIDATION'
  - echo '================================='
  - echo ''
  - echo 'üìÅ Checking for .vibe.yaml file:'
  - |
    if [ -f ".vibe.yaml" ]; then
      echo '‚úÖ .vibe.yaml found'
    else
      echo '‚ùå .vibe.yaml not found'
      echo '   üí° Create .vibe.yaml with: protocol_version: 1 and project_type: "auto"'
      exit 1
    fi
  - echo ''
  - echo 'üîç Running comprehensive validation:'
  - vibe check
  - echo ''
  - echo 'üìã Validating YAML syntax:'
  - |
    if command -v python >/dev/null 2>&1; then
      python -c "import yaml; yaml.safe_load(open('.vibe.yaml'))" && echo '‚úÖ YAML syntax valid'
    elif command -v python3 >/dev/null 2>&1; then
      python3 -c "import yaml; yaml.safe_load(open('.vibe.yaml'))" && echo '‚úÖ YAML syntax valid'
    else
      echo '‚ö†Ô∏è  Python not available for YAML validation'
    fi
  - echo ''
  - echo '‚úÖ .vibe.yaml format validation complete'
  - echo ''
  - echo 'üí° For detailed configuration guidance:'
  - echo '   ‚Ä¢ vibe guide "setup vibe project" - Project setup guidance'
  - echo '   ‚Ä¢ vibe guide "optimize vibe configuration" - Configuration optimization tips'
guidance: |
  This workflow validates the .vibe.yaml configuration format for any Vibe project.
  It checks for:

  ‚Ä¢ Required fields (protocol_version, project_type)
  ‚Ä¢ Proper YAML syntax and structure
  ‚Ä¢ Environment compatibility
  ‚Ä¢ Tool dependencies

  This is a general-purpose workflow available to all Vibe projects. Use 'vibe check'
  for the most comprehensive validation, or this workflow for focused configuration
  validation with additional YAML syntax checking.

  Common fixes:
  ‚Ä¢ Add 'protocol_version: 1' if missing
  ‚Ä¢ Add 'project_type: "auto"' or specific type if missing
  ‚Ä¢ Fix YAML indentation or syntax errors
  ‚Ä¢ Ensure workflows section uses proper list/dictionary structure
