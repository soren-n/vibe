name: "Automation and Quality Gates"
description: "Setup and validate automation for continuous quality improvement"
triggers:
  - "setup automation"
  - "configure quality gates"
  - "setup pre-commit"
  - "automate quality checks"
  - "continuous quality"

category: "automation"

steps:
  - step_text: "Install pre-commit if not already available"
    command: "uv run pre-commit --version || uv add --dev pre-commit"
    working_dir: "."

  - step_text: "Configure pre-commit hooks for the repository"
    command: "uv run pre-commit install --install-hooks"
    working_dir: "."

  - step_text: "Run pre-commit validation on all files"
    command: "uv run pre-commit run --all-files"
    working_dir: "."

  - step_text: "Verify git hooks integration is working"
    command: "ls -la .git/hooks/ | grep pre-commit || echo 'Setting up hooks...'"
    working_dir: "."

  - step_text: "Execute automated quality checks to validate setup"
    command: "uv run ruff check . && uv run mypy . && uv run pytest tests/ -q"
    working_dir: "."

  - step_text: "Test MCP workflow automation functionality"
    command: "cd mcp-server && npm test && echo 'MCP automation validated'"
    working_dir: "."
