name: python_test
description: Comprehensive python test guidance
triggers:
- check.*tests
- pytest
- run.*tests
- test.*code
- test.*coverage.*check
- tests.*complete
- validate.*tests
- verify.*testing
steps:
- 'Run tests: `uv run pytest -q --maxfail=1`'
- 'Install pytest if missing: `uv add --dev pytest`'
- 'Create test scaffold if no tests exist: `mkdir -p tests && echo ''def test_placeholder():
  pass'' > tests/test_basic.py`'
- 'Run specific test file: `uv run pytest tests/test_specific.py -v`'
- 'Run with coverage: `uv run pytest --cov=. --cov-report=term-missing`'
dependencies:
- python_quality
project_types:
- python
conditions:
- file:pyproject.toml
- pattern:test_*.py
- pattern:*_test.py
items:
- All tests pass without errors or failures
- Test coverage meets project requirements (typically >80%)
- Critical functionality is adequately tested
- Edge cases and error conditions are covered
- Tests run efficiently without excessive duration
- No flaky or intermittent test failures
- Test dependencies are properly isolated
- Integration tests cover key workflows
- Test documentation explains complex test scenarios
